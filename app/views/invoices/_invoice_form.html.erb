<%= javascript_include_tag "invoices/invoice_form"%>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css">

<% form_for invoice do |f| %>
  <%= f.error_messages :class => "error" %>

  <%= render :partial => "invoice_fields", :locals => {:invoice => f, :customer => customer} %>

  <table id="newInvoiceItems">
    <tr>
      <th></th>
      <th class="unitHeader">Unidad</th>
      <th class="qtyHeader">Cantidad</th>
      <th class="descriptionHeader">Descripción</th>
      <th class="priceHeader">Precio</th>
      <th class="totalHeader">Total</th>
    </tr>

    <% f.fields_for :invoice_items do |builder| %>
      <%= render :partial => "invoice_item_fields", :locals => {:f => builder, :products => products } %>
    <% end %>
  </table>
  <hr/>
  <div>
	<%= hidden_field_tag "invoice_items_index", invoice.invoice_items.size %>
    <span class="addLink"><%= link_to_add_fields "Agregar línea" ,f, :invoice_items, :products => products %></span>
 </div>

  <div class="span-10 prepend-9 last">
    <table class="totals">
      <tr>
        <td class="netLabel">Neto</td>
        <td class="readonly"><%= f.text_field :net,
               :readonly => "readonly", :class => "netPrice"  %></td>
      </tr>
      <tr>
        <td class="taxLabel">IVA</td>
        <td class="readonly"><%= f.text_field :tax,
            :class => "taxPrice" %></td>
      </tr>
      <tr>
        <td class="totalLabel">Total</td>
        <td class="readonly"><%= f.text_field :total,
           :readonly => "readonly", :class => "totalPrice"  %> </td>
      </tr>
    </table>
  </div>

  <div class="last">
    <strong>Comentarios</strong> (agregue detalles extra a continuación)
    <hr/>
  <%= f.text_area :comment, :rows => 5, :cols => 90 %>

    <br/>

    <p>Cuando haya terminado, guarde su factura. Luego podrá enviarla.</p>

  </div>

  <br/>
  <%= f.submit "Guardar" %>
  <%= link_to "Cancelar", invoices_path() %>
<% end %>


